#!/usr/bin/env node
var program = require('commander'),
    texvcinfo = require('texvcinfo'),
    json = require('../package.json'),
    fs = require('fs');

program
    .version(json.version)
    .usage('<json input file> <json output file>');


program.parse(process.argv);

var input = program.args.join(' ');

var formulae = require(program.args[0]);
var result=[];
formulae.map( function(x) {
    result.push({inputhash:x.inputhash, tokens:texvcinfo.texvcinfo(x.input)});
});

fs.writeFile(program.args[1], JSON.stringify(result), function(err) {
    if(err) {
        console.log('error saving document', err);
    } else {
        console.log('The file "'+program.args[1]+'" was saved!');
    }
});

